
<h2><%= @product.title %> </h2>
<p><%= @product.description %> </p>
<p>By <%= @product.user&.full_name || "[deleted]" %></p>

<p>price: $ <%= @product.price %> </p>
<hr>
<% if can?(:manage, @product) %>

    <%= link_to 'Edit', edit_product_path(@product) %>

    <%= link_to(
         'Delete',
         product_path(@product),
         method: :delete,
         data: {confirm: 'Are you sure what you are doing now ???'}
       )
    %>
<% end %>

<br />
<br />
<br />


<hr>
<%= form_for [@product, @review] do |f| %>
  <% if @review.errors.present? %>
    <p>
      <%= @review.errors.full_messages.join(', ') %>
    </p>
  <% end %>

  <div>
    Rating: <%= f.number_field :rating, in: 1..5%> <br />
    Comments: <%= f.text_area :body %>
  </div>

  <%= f.submit %>
<% end %>



<hr>
<div class="review-list">
    <% @reviews.each do |review| %>
      <div class="review-list-item">
        <p>Rating: <%= review.rating %></p>
        <p>Review: <%= review.body %></p>
        <p>By <%= review.user&.full_name || "[deleted]" %></p>
        <p>
          <strong>Created At:</strong>
          <%= time_ago_in_words(review.created_at) %> ago
        </p>

      <% if can?(:destroy, review) %>
          <%= link_to(
            'Delete',
            product_review_path(@product, review),
            data: {confirm: 'Are you sure?'},
            method: :delete
          )
          %>
      <% end %>

      </div>
    <% end %>
</div>
